<div class="container">
  <!-- Page Heading -->
  <div class="row">
    <div class="col-lg-12">
      <h1 class="page-header">Get A Token / Impersonate<br/>
        <small>Will Generate Link and Token for Another User</small>
      </h1>
    </div>
  </div>
      <div class="row">
        <div class="col-sm-6 leftthing">
          <%= form_tag( { :controller => :users, :action => :get_user_token }, { :method => :post, :remote => true }) do %>
              <div class="form-group">
                <%= label_tag "Environment: ", nil, class: "control-label" %>
                <% environments = [['QA', 'qa'], ['Staging', 'stage'], ['Production', 'prod']] %>
                <%= select_tag(:environment, options_for_select(environments), :class => 'select') %>
              </div>
            <div class="form-group">
              <%= label_tag "Email", nil, class: "control-label" %>
              <%= text_field_tag :email, nil, :class => "form-control first_input"  %>
            </div>
              <div class="form-group">
                <%= submit_tag "Get Token", :id => 'sub', :class => "btn btn-primary", :disable_with => "Looking Up..." %>
              </div>
          <% end %>
        </div>
      </div>
</div>
<div class="container">
    <div class="spinner">
      <div class="sk-cube-grid">
        <div class="sk-cube sk-cube1"></div>
        <div class="sk-cube sk-cube2"></div>
        <div class="sk-cube sk-cube3"></div>
        <div class="sk-cube sk-cube4"></div>
        <div class="sk-cube sk-cube5"></div>
        <div class="sk-cube sk-cube6"></div>
        <div class="sk-cube sk-cube7"></div>
        <div class="sk-cube sk-cube8"></div>
        <div class="sk-cube sk-cube9"></div>
      </div>
  </div>
</div>

<div class="container" id="resultpane">
  <div class="col-md-8 bottomthing">
    <div class="panel panel-default">
      <script>
          var clipboard = new Clipboard('.btn');
          clipboard.on('success', function() {
              $('#token_print').addClass('backgroundAnimated');
              setTimeout(function(){
                  $('#token_print').addClass('nextBackgroundAnimated');
              }, 500);
          });
      </script>
      <div id="result" class="panel-body">
      </div>
    </div>
  </div>
</div>
<script>
    $(document).on('turbolinks:load', function() {
        console.log('(document).turbolinks:load')
        $(".spinner").delay(500).hide(0);
    });

    $(document).on("click", "#sub", function() {
        console.log('(document).click')
        $(".spinner").show();
        $(".spinner").delay(1500).hide(0);


    });
    $(function() {
      $('#resultpane').css('visibility', 'hidden');
      $(".spinner").hide(0);
    });


</script>


